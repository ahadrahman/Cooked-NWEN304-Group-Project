<html>
    <%- include('./partials/head.ejs') %>
    <body class="h-screen">

    <%- include('./partials/nav.ejs') %>
        <div class="container page-content px-16 py-8 bg-white flex mx-auto">
            <div class="container w-full bg-eggshell rounded-md shadow-xl flex flex-row mx-auto p-8 space-x-16">
                <div class="w-1/3 flex-col">
                    <h2 class="uppercase text-primary-dg font-bold text-center"><%- recipe.title %></h2>
                    <p class="border-b-2 border-secondary-brown mt-2"></p>

                    <div class="text-sm text-center mt-2 text-primary-dg">
                        <span>Ready in <%- recipe.readyInMinutes%> minutes </span>
                        <span class="font-bold"> | </span>
                        <span>Serves <%- recipe.servings%></span>
                    </div>

                    <% if (recipe.image !== "") { %>
                        <img class="rounded-xl my-6 w-full object-cover shadow-sm" src=<%-recipe.image%> alt=<%-recipe.title%>>
                    <% } %>
                    <p class="border-b-2 border-secondary-brown mb-8"></p>

                    <button id="saveRecipe"
                            style="display: none"
                            class="block bg-secondary-brown text-center text-md no-underline text-eggshell mx-auto p-2 px-8 rounded-3xl shadow-md hover:bg-secondary-pink hover:shadow-xl">
                        Save Recipe
                    </button>
                    <button id="removeRecipe"
                            style="display: none"
                            class="block bg-secondary-brown text-center text-md no-underline text-eggshell mx-auto p-2 px-8 rounded-3xl shadow-md hover:bg-secondary-pink hover:shadow-xl">
                        Remove Recipe
                    </button>
                </div>

                <div class="w-2/3 flex-col space-y-4">
                    <div class="space-y-1">
                        <p class="uppercase text-primary-dg font-bold text-center">Ingredients</p>
                        <% recipe.extendedIngredients.forEach(function (ingredient) { %>
                        <p class="text-sm"><%=ingredient.original%></p>
                        <% })%>
                    </div>

                    <p class="border-b-2 border-secondary-brown border-dashed my-2"></p>

                    <div class="space-y-1">
                        <p class="uppercase text-primary-dg font-bold text-center">Preparations</p>
                        <p class="text-sm"><%- recipe.instructions%></p>
                    </div>
                </div>

                <!-- SIMILAR RECIPES HERE -->
                <div id="similarRecipes" style="display: none">
                    <h2 class="uppercase text-primary-dg font-bold text-center">Recommended Recipes</h2>
                    <% similarRecipes.forEach( (sr) => {  %>
                    <div class="flex flex-col my-4 mx-6 w-1/4">
                        <a href=<%-"/recipes/"+sr.id%>>
                            <a class="hover:text-secondary-pink" href=<%-"/recipes/"+sr.id%>> <%- sr.title %> </a>
                        </a>
                    </div>
                    <% }) %>
                </div>

            </div>

        </div>


        <div class='recipeStore' data-test-value='<%= JSON.stringify(recipe) %>'></div>
        <script src = "/controller/recipeDetails.js"></script>
    </body>
</html>
